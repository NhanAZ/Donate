# Donate Plugin

Plugin n·∫°p th·∫ª cho m√°y ch·ªß PocketMine-MP.

## Tuy√™n b·ªë t·ª´ ch·ªëi tr√°ch nhi·ªám

**QUAN TR·ªåNG: T·ª´ ch·ªëi tr√°ch nhi·ªám**

ƒê√¢y l√† m·ªôt d·ª± √°n c√° nh√¢n kh√¥ng ƒë∆∞·ª£c ph√°t tri·ªÉn t√≠ch c·ª±c. Plugin n√†y ƒë∆∞·ª£c cung c·∫•p "nguy√™n tr·∫°ng" m√† kh√¥ng c√≥ b·∫•t k·ª≥ b·∫£o ƒë·∫£m n√†o, d√π r√µ r√†ng hay ng·ª• √Ω. T√¥i kh√¥ng ch·ªãu tr√°ch nhi·ªám v√† kh√¥ng tham gia v√†o vi·ªác ph√°t tri·ªÉn, b·∫£o tr√¨ ho·∫∑c h·ªó tr·ª£ plugin n√†y.

- Kh√¥ng c√≥ phi√™n b·∫£n ch√≠nh th·ª©c n√†o ƒë∆∞·ª£c ph√°t h√†nh (kh√¥ng c√≥ file .phar)
- Repository n√†y t·ªìn t·∫°i ch·ªß y·∫øu cho m·ª•c ƒë√≠ch tham kh·∫£o, h·ªçc t·∫≠p v√† l√†m portfolio
- Vi·ªác s·ª≠ d·ª•ng plugin n√†y trong m√¥i tr∆∞·ªùng th·ª±c t·∫ø ho√†n to√†n thu·ªôc tr√°ch nhi·ªám c·ªßa ng∆∞·ªùi d√πng
- T√¥i kh√¥ng ƒë·∫£m b·∫£o r·∫±ng plugin ho·∫°t ƒë·ªông ƒë√∫ng c√°ch ho·∫∑c kh√¥ng c√≥ l·ªói
- T√¥i kh√¥ng ch·ªãu tr√°ch nhi·ªám v·ªÅ b·∫•t k·ª≥ thi·ªát h·∫°i n√†o c√≥ th·ªÉ x·∫£y ra do s·ª≠ d·ª•ng plugin n√†y
- Plugin n√†y kh√¥ng li√™n k·∫øt ch√≠nh th·ª©c v·ªõi b·∫•t k·ª≥ d·ªãch v·ª• thanh to√°n n√†o
- M√£ ngu·ªìn ƒë∆∞·ª£c cung c·∫•p cho m·ª•c ƒë√≠ch tham kh·∫£o v√† c√≥ th·ªÉ ch·ª©a l·ªói
- ƒê√¢y l√† d·ª± √°n m√£ ngu·ªìn m·ªü, m·ªçi ng∆∞·ªùi c√≥ th·ªÉ t·ª± do ƒë√≥ng g√≥p ho·∫∑c ch·ªânh s·ª≠a th√¥ng qua PR v√† Issue, nh∆∞ng kh√¥ng ƒë·∫£m b·∫£o r·∫±ng c√°c ƒë√≥ng g√≥p s·∫Ω ƒë∆∞·ª£c xem x√©t

### Gi·∫•y ph√©p

Plugin n√†y ƒë∆∞·ª£c ph√°t h√†nh d∆∞·ªõi gi·∫•y ph√©p [MIT License](LICENSE). B·∫°n ƒë∆∞·ª£c ph√©p s·ª≠ d·ª•ng, sao ch√©p, s·ª≠a ƒë·ªïi, h·ª£p nh·∫•t, xu·∫•t b·∫£n, ph√¢n ph·ªëi, c·∫•p ph√©p l·∫°i v√†/ho·∫∑c b√°n c√°c b·∫£n sao c·ªßa ph·∫ßn m·ªÅm, nh∆∞ng ph·∫£i ghi nh·∫≠n t√°c gi·∫£ g·ªëc v√† bao g·ªìm th√¥ng b√°o b·∫£n quy·ªÅn c√πng v·ªõi gi·∫•y ph√©p n√†y trong t·∫•t c·∫£ c√°c b·∫£n sao ho·∫∑c ph·∫ßn quan tr·ªçng c·ªßa ph·∫ßn m·ªÅm.

S·ª≠ d·ª•ng plugin n√†y ƒë·ªìng nghƒ©a v·ªõi vi·ªác b·∫°n ch·∫•p nh·∫≠n c√°c ƒëi·ªÅu kho·∫£n tr√™n.

## ‚ú® T√≠nh nƒÉng

- **N·∫°p th·∫ª tr·ª±c ti·∫øp trong game** qua giao di·ªán th√¢n thi·ªán
- **H·ªó tr·ª£ nhi·ªÅu lo·∫°i th·∫ª**: Viettel, Mobifone, Vinaphone, Vietnamobile, Zing
- **X·ª≠ l√Ω b·∫•t ƒë·ªìng b·ªô**, kh√¥ng l√†m gi·∫≠t lag server khi x·ª≠ l√Ω th·∫ª
- **B·∫£ng x·∫øp h·∫°ng ng∆∞·ªùi ch∆°i** n·∫°p th·∫ª ƒëa trang, d·ªÖ nh√¨n
- **Th√¥ng b√°o to√†n server** khi c√≥ ng∆∞·ªùi n·∫°p th·∫ª th√†nh c√¥ng
- **H·ªá th·ªëng ph·∫ßn th∆∞·ªüng** c√≥ th·ªÉ t√πy ch·ªânh d·ªÖ d√†ng
- **Admin c√≥ th·ªÉ n·∫°p th·∫ª** gi√∫p ng∆∞·ªùi ch∆°i qua console
- **H·ªá th·ªëng ghi log** chi ti·∫øt cho vi·ªác theo d√µi v√† g·ª° l·ªói
- **Debug mode** gi√∫p qu·∫£n tr·ªã vi√™n ki·ªÉm tra v√† x·ª≠ l√Ω s·ª± c·ªë

## üì• C√†i ƒë·∫∑t

1. Clone repository n√†y: `git clone https://github.com/NhanAZ/Donate.git`
2. Copy th∆∞ m·ª•c `Donate` v√†o th∆∞ m·ª•c `plugins` c·ªßa server PocketMine-MP
3. C√†i ƒë·∫∑t dependency [pmforms](https://github.com/dktapps/pmforms)
4. Kh·ªüi ƒë·ªông l·∫°i server
5. C·∫•u h√¨nh file `config.yml` trong th∆∞ m·ª•c `plugins/Donate`

L∆∞u √Ω: Plugin n√†y kh√¥ng c√≥ file `.phar`, b·∫°n c·∫ßn s·ª≠ d·ª•ng tr·ª±c ti·∫øp t·ª´ m√£ ngu·ªìn.

## ‚öôÔ∏è C·∫•u h√¨nh

Sau khi c√†i ƒë·∫∑t, vui l√≤ng ch·ªânh s·ª≠a file `config.yml` ƒë·ªÉ th√™m th√¥ng tin ƒë·ªëi t√°c t·ª´ [trumthe.vn](https://trumthe.vn/):

```yaml
# Th√¥ng tin ƒë·ªëi t√°c (t·ª´ trumthe.vn)
partner_id: ""  # ID ƒë·ªëi t√°c
partner_key: "" # Kh√≥a API ƒë·ªëi t√°c

# C√†i ƒë·∫∑t ph·∫ßn th∆∞·ªüng
bonus_multiplier: 1.0  # H·ªá s·ªë nh√¢n ph·∫ßn th∆∞·ªüng khi n·∫°p th·∫ª th√†nh c√¥ng (1.0 = 100%)

# C√†i ƒë·∫∑t debug
debug:
  enabled: false  # B·∫≠t/t·∫Øt ch·∫ø ƒë·ªô debug
  notify_admins: false  # G·ª≠i th√¥ng b√°o debug cho admin
  categories:  # C√°c danh m·ª•c debug
    general: true
    payment: true
    form: true
    api: true
    command: true
```

## üìã L·ªánh & Alias

### L·ªánh N·∫°p Th·∫ª
- **Ch√≠nh th·ª©c**: `/donate`
- **Alias**: `/napthe`, `/card`, `/nap`
- **M√¥ t·∫£**: M·ªü form n·∫°p th·∫ª (cho ng∆∞·ªùi ch∆°i) ho·∫∑c n·∫°p th·∫ª gi√∫p ng∆∞·ªùi ch∆°i (t·ª´ console)
- **Quy·ªÅn h·∫°n**: `donate.command.donate`
- **S·ª≠ d·ª•ng**:
  - Ng∆∞·ªùi ch∆°i: `/donate`
  - Console: `/donate <t√™n ng∆∞·ªùi ch∆°i> <telco> <m√£ th·∫ª> <serial> <m·ªánh gi√°>`
  - V√≠ d·ª•: `/donate NhanAZ VIETTEL 123456789012 987654321098 50000`

### L·ªánh B·∫£ng X·∫øp H·∫°ng
- **Ch√≠nh th·ª©c**: `/topdonate [trang]`
- **Alias**: `/topnap`, `/topcard`, `/bangxephang`, `/bxh`
- **M√¥ t·∫£**: Xem b·∫£ng x·∫øp h·∫°ng ng∆∞·ªùi ch∆°i n·∫°p th·∫ª
- **Quy·ªÅn h·∫°n**: `donate.command.topdonate`

### L·ªánh Debug (Admin)
- **Ch√≠nh th·ª©c**: `/donatedebug`
- **Alias**: `/ddebug`, `/ddbg`, `/napdebug`
- **M√¥ t·∫£**: Qu·∫£n l√Ω v√† ki·ªÉm tra th√¥ng tin debug
- **Quy·ªÅn h·∫°n**: `donate.command.debug`
- **C√°c l·ªánh con**:
  - `/donatedebug pending` - Xem giao d·ªãch ƒëang x·ª≠ l√Ω
  - `/donatedebug status <requestId>` - Ki·ªÉm tra tr·∫°ng th√°i giao d·ªãch
  - `/donatedebug toggle <category>` - B·∫≠t/t·∫Øt debug cho danh m·ª•c
  - `/donatedebug enabledebug` - B·∫≠t debug
  - `/donatedebug disabledebug` - T·∫Øt debug
  - `/donatedebug notifyadmins` - B·∫≠t/t·∫Øt th√¥ng b√°o debug
  - `/donatedebug list` - Li·ªát k√™ tr·∫°ng th√°i debug
  - `/donatedebug loginfo` - Xem th√¥ng tin log
  - `/donatedebug clearlog` - X√≥a n·ªôi dung log
  - `/donatedebug testlog` - Ki·ªÉm tra ghi log

## üîí Quy·ªÅn H·∫°n

```yaml
donate.command.donate:
  default: true
  description: "Cho ph√©p s·ª≠ d·ª•ng l·ªánh /donate"
donate.command.topdonate:
  default: true
  description: "Cho ph√©p s·ª≠ d·ª•ng l·ªánh /topdonate"
donate.command.debug:
  default: op
  description: "Cho ph√©p s·ª≠ d·ª•ng l·ªánh /donatedebug"
donate.admin:
  default: op
  description: "C·∫•p quy·ªÅn admin cho plugin n·∫°p th·∫ª"
```

## üõ†Ô∏è T√≠ch H·ª£p V√†o Plugin Kh√°c

Plugin cung c·∫•p c√°c API ƒë·ªÉ t√≠ch h·ª£p v·ªõi c√°c plugin kh√°c:

```php
// Ki·ªÉm tra xem ng∆∞·ªùi ch∆°i ƒë√£ n·∫°p bao nhi√™u
$donatePlugin = $server->getPluginManager()->getPlugin("Donate");
$donateAmount = $donatePlugin->getDonateData()->getNested($playerName, 0);

// ƒêƒÉng k√Ω ph·∫ßn th∆∞·ªüng t√πy ch·ªânh
// Xem th√™m ph∆∞∆°ng th·ª©c successfulDonation trong src/Donate.php
```

## üéÅ Ph·∫ßn Th∆∞·ªüng

B·∫°n c√≥ th·ªÉ t√πy ch·ªânh h·ªá th·ªëng ph·∫ßn th∆∞·ªüng trong file `config.yml` th√¥ng qua `bonus_multiplier`, ho·∫∑c ch·ªânh s·ª≠a tr·ª±c ti·∫øp ph∆∞∆°ng th·ª©c `successfulDonation` trong file `src/Donate.php` ƒë·ªÉ th√™m c√°c lo·∫°i ph·∫ßn th∆∞·ªüng ƒë·∫∑c bi·ªát.

V√≠ d·ª• code th√™m xu sau khi n·∫°p th·∫ª th√†nh c√¥ng:
```php
// Trong ph∆∞∆°ng th·ª©c successfulDonation
// $bonusAmount ƒë√£ ƒë∆∞·ª£c t√≠nh to√°n t·ª´ $amount v√† $multiplier
EconomyAPI::getInstance()->addMoney($playerName, $bonusAmount);
```

## üë• T√°c Gi·∫£

- [NhanAZ](https://github.com/NhanAZ)
- [hachkingtohach1](https://github.com/hachkingtohach1)
- [TungstenVN](https://github.com/TungstenVN)

## üß™ Testing & Tri·ªÉn Khai

- **Testing**: C·∫£m ∆°n Thanh Huy (Miheisu) ƒë√£ gi√∫p ki·ªÉm th·ª≠ cho plugin n√†y
- **Server s·ª≠ d·ª•ng**: B·∫°n c√≥ th·ªÉ tr·∫£i nghi·ªám plugin n√†y tr√™n server **miheisu.io.vn** (c·ªïng 19132)

## ü§ñ AI Assistance

Plugin n√†y ƒë√£ ƒë∆∞·ª£c c·∫£i thi·ªán v·ªõi s·ª± h·ªó tr·ª£ c·ªßa [Claude](https://www.anthropic.com/claude), m·ªôt AI assistant t·ª´ Anthropic, gi√∫p t·ªëi ∆∞u h√≥a m√£ ngu·ªìn v√† n√¢ng cao UX.

## üìú Gi·∫•y Ph√©p

Plugin n√†y ƒë∆∞·ª£c ph√°t h√†nh d∆∞·ªõi gi·∫•y ph√©p [MIT License](LICENSE).

## ü§ù H·ªó Tr·ª£

Plugin n√†y hi·ªán kh√¥ng ƒë∆∞·ª£c b·∫£o tr√¨ t√≠ch c·ª±c. M·∫∑c d√π b·∫°n c√≥ th·ªÉ t·∫°o [Issue](https://github.com/NhanAZ/Donate/issues) tr√™n GitHub, nh∆∞ng kh√¥ng ƒë·∫£m b·∫£o s·∫Ω c√≥ ph·∫£n h·ªìi ho·∫∑c h·ªó tr·ª£. N·∫øu b·∫°n mu·ªën s·ª≠ d·ª•ng plugin n√†y, khuy·∫øn kh√≠ch b·∫°n fork d·ª± √°n v√† t·ª± duy tr√¨ phi√™n b·∫£n c·ªßa ri√™ng m√¨nh. 